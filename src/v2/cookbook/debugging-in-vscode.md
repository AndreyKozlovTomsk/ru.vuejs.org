---
title: Отладка в VS Code и Chrome
type: cookbook
order: 8
---

Каждое приложение достигает отметки, когда становится необходимо разбираться в ошибках, от больших до малых. В этом рецепте мы исследуем несколько возможностей для пользователей VS Code, кто использует Chrome для тестирования.

Этот рецепт покажет как использовать расширение [Debugger for Chrome](https://github.com/Microsoft/VSCode-chrome-debug) в паре с VS Code для отладки приложений Vue.js, сгенерированных с помощью [Vue CLI](https://github.com/vuejs/vue-cli).

## Подготовка

У вас должен быть установлен Chrome и VS Code. Убедитесь, что установили последнюю версию расширения [Debugger for Chrome](https://marketplace.visualstudio.com/items?itemName=msjsdiag.debugger-for-chrome) в VS Code.

Установите и создайте проект с помощью [vue-cli](https://github.com/vuejs/vue-cli), руководствуясь инструкциям по установке, указанным в readme проекта. Перейдите в каталог новосозданного приложения и откройте VS Code.

### Отображение исходного кода в инструментах разработчика Chrome

Перед тем, как вы сможете отлаживать ваши компоненты Vue из VS Code, вам необходимо обновить сгенерированную конфигурацию Webpack для генерации sourcemaps. Мы делаем это, чтобы отладчик имел возможность сопоставлять код в сжатых файлов со строками в оригинальных. Это гарантирует, что вы можете отлаживать приложения даже после того, как все ваши ресурсы были оптимизированы с помощью Webpack.

Откройте `config/index.js` и найдите свойство `devtool`. Обновите до указанного:

```json
devtool: 'source-map',
```

### Запуск приложение из VS Code

Нажмите на значок отладки в панели действий (узкая боковая панель слева) чтобы открыть представление "Отладка", затем нажмите на значок шестерёнки, чтобы настроить файл launch.json, выберите **Chrome** для окружения. Замените содержимое сгенерированного launch.json указанной ниже конфигурацией:

![Добавление конфигурации Chrome](/images/config_add.png)

```json
{
  "version": "0.2.0",
  "configurations": [
    {
      "type": "chrome",
      "request": "launch",
      "name": "vuejs: chrome",
      "url": "http://localhost:8080",
      "webRoot": "${workspaceFolder}/src",
      "breakOnLoad": true,
      "sourceMapPathOverrides": {
        "webpack:///src/*": "${webRoot}/*"
      }
    }
  ]
}
```

## Установка точки останова

1.  Установите точку останова в файле **src/components/HelloWorld.vue** на `строке 90` где функция `data` возвращает строку.

  ![Breakpoint Renderer](/images/breakpoint_set.png)

2.  Откройте свою любимую консоль в корневом каталоге приложения и запустите его с помощью Vue CLI:

  ```
  npm start
  ```

3.  Перейдите в режим отладки, выберите конфигурацию **'vuejs: chrome'**, затем нажмите F5 или зелёную кнопку для старта.

4.  Ваша точка останова должна быть достигнута, когда новый экземпляр Chrome откроет `http://localhost:8080`.

![Breakpoint Hit](/images/breakpoint_hit.png)

## Альтернативные варианты

### Vue Devtools

Существуют и другие методы отладки, различающиеся по сложности. Самый популярный и простой из них — [vue-devtools](https://chrome.google.com/webstore/detail/vuejs-devtools/nhdogjmejiglipccpnnnanhbledajbpd). Главное из преимуществ работы с инструментами разработки (devtools) состоит в том, что они позволяют вам в реальном времени менять свойства данных и сразу видеть изменения на странице. Другим важным преимуществом является возможность отладки во времени (time travel debugging) для Vuex.

![Devtools Timetravel Debugger](/images/devtools-timetravel.gif)

<p class="tip">Обратите внимание, если на странице используется production/минифицированная сборка Vue.js (как например, стандартная ссылка на CDN), то проверка инструментов разработки по умолчанию отключена и поэтому панель Vue не будет отображаться в инструментах разработчика. Если вы переключитесь на неминифицированную версию, вам может потребоваться обновить страницу, чтобы увидеть изменения.</p>

### Vuetron

[Vuetron](http://vuetron.io/) — действительно хороший проект, который расширяет часть идей vue-devtools. В дополнение к обычным принципам работы с инструментами разработки вы сможете:

* Быстро просмотреть запрос/ответ к API: если вы используете fetch API для запросов, это событие будет отображаться для любого отправленного запроса. Расширенная карта отображает как данные запроса, так и данные ответа.
* Возможность подписаться на определённые части вашего состояния приложения для ускорения отладки
* Визуализировать иерархию компонентов с возможностью свернуть или развернуть дерево компонентов для определённых частей иерархии.

![Vuetron Heirarchy](/images/vuetron-heirarchy.gif)

### Использование выражения Debugger

Примеры выше предоставляют отличные рабочие варианты для отладки. Однако, есть и альтернативный вариант, когда вы просто можете использовать [нативное выражение debugger](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Statements/debugger) прямо в вашем коде. Если вы выберите этот путь, важно не забыть удалить эти выражения после окончания отладки.

```js
<script>
export default {
  data() {
    return {
      message: ''
    }
  },
  mounted() {
    const hello = 'Hello World!'
    debugger
    this.message = hello
  }
};
</script>
```

## Благодарности

Этот рецепт был основан на примере [Kenneth Auchenberg](https://twitter.com/auchenberg), который [доступен здесь](https://github.com/Microsoft/VSCode-recipes/tree/master/vuejs-cli).
