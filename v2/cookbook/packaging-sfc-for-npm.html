

<!DOCTYPE html>
<html lang="ru">
    <head><meta name="generator" content="Hexo 3.8.0">
        <title>Публикация Vue-компонентов в npm — Vue.js</title>
        <meta charset="utf-8">
        <meta name="description" content="Vue.js — Прогрессивный JavaScript-фреймворк">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

        <link rel="alternate" hreflang="x-default" href="https://vuejs.org/v2/cookbook/packaging-sfc-for-npm.html">
        <link rel="alternate" hreflang="zh" href="https://cn.vuejs.org/v2/cookbook/packaging-sfc-for-npm.html">
        <link rel="alternate" hreflang="ja" href="https://jp.vuejs.org/v2/cookbook/packaging-sfc-for-npm.html">
        <link rel="alternate" hreflang="ru" href="https://ru.vuejs.org/v2/cookbook/packaging-sfc-for-npm.html">
        <link rel="alternate" hreflang="ko" href="https://kr.vuejs.org/v2/cookbook/packaging-sfc-for-npm.html">
        <link rel="alternate" hreflang="pt-BR" href="https://br.vuejs.org/v2/cookbook/packaging-sfc-for-npm.html">
        <link rel="alternate" hreflang="fr" href="https://fr.vuejs.org/v2/cookbook/packaging-sfc-for-npm.html">

        <meta property="og:type" content="article">
        <meta property="og:title" content="Публикация Vue-компонентов в npm — Vue.js">
        <meta property="og:description" content="Vue.js — Прогрессивный JavaScript-фреймворк">
        <meta property="og:image" content="https://ru.vuejs.org//images/logo.png">

        <meta name="twitter:card" content="summary">
        <meta name="twitter:title" content="Публикация Vue-компонентов в npm — Vue.js">
        <meta name="twitter:description" content="Vue.js — Прогрессивный JavaScript-фреймворк">
        <meta name="twitter:image" content="https://ru.vuejs.org/images/logo.png">

        <link rel="apple-touch-icon" sizes="57x57" href="/images/icons/apple-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="60x60" href="/images/icons/apple-icon-60x60.png">
        <link rel="apple-touch-icon" sizes="72x72" href="/images/icons/apple-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="76x76" href="/images/icons/apple-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="114x114" href="/images/icons/apple-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="120x120" href="/images/icons/apple-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="144x144" href="/images/icons/apple-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="152x152" href="/images/icons/apple-icon-152x152.png">
        <link rel="apple-touch-icon" sizes="180x180" href="/images/icons/apple-icon-180x180.png">
        <link rel="icon" type="image/png" sizes="192x192" href="/images/icons/android-icon-192x192.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/images/icons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="96x96" href="/images/icons/favicon-96x96.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/images/icons/favicon-16x16.png">
        <meta name="msapplication-TileImage" content="/images/icons/ms-icon-144x144.png">
        <link rel="icon" href="/images/logo.png" type="image/png">

        <meta name="msapplication-TileColor" content="#4fc08d">
        <meta name="theme-color" content="#4fc08d">

        <meta name="msapplication-config" content="browserconfig.xml">
        <link rel="manifest" href="/manifest.json">

        <link href="//fonts.googleapis.com/css?family=Roboto Mono" rel="stylesheet" type="text/css">
        <link href="//fonts.googleapis.com/css?family=Dosis:500&text=Vue.js" rel="stylesheet" type="text/css">

        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

        <!-- main page styles -->
        <link rel="stylesheet" href="/css/page.css">

        <!-- this needs to be loaded before guide's inline scripts -->
        <script src="/js/vue.js"></script>
        <script>
          Vue.config.productionTip = false
          window.PAGE_TYPE = "cookbook"
        </script>

        <!-- ga -->
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
          ga('create', 'UA-46852172-1', 'ru.vuejs.org');

          ga('send', 'pageview');
        </script>

        <!-- vimeo analytics -->
        <script type="text/javascript" defer="defer" src="https://extend.vimeocdn.com/ga/72160148.js"></script>
    </head>
    <body class="docs">
        <div id="mobile-bar">
            <a class="menu-button"></a>
            <a class="logo" href="/"></a>
        </div>
        <div id="header">
  <a id="logo" href="/">
    <img src="/images/logo.png" alt="Логотип Vue">
    <span>Vue.js</span>
  </a>
  <ul id="nav">
    <li>
  <form id="search-form">
    <input type="text" id="search-query-nav" class="search-query st-default-search-input">
  </form>
</li>
<li class="nav-dropdown-container learn">
  <a class="nav-link current">Обучение</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><ul>
      <li><a href="/v2/guide/" class="nav-link">Руководство</a></li>
      <li><a href="/v2/api/" class="nav-link">API</a></li>
      <li><a href="/v2/style-guide/" class="nav-link">Рекомендации</a></li>
      <li><a href="/v2/examples/" class="nav-link">Примеры</a></li>
      <li><a href="/v2/cookbook/" class="nav-link current">Cookbook</a></li>
    </ul></li>
  </ul>
</li>

<li class="nav-dropdown-container ecosystem">
  <a class="nav-link">Экосистема</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><h4>Помощь</h4></li>
    <li><ul>
      <li><a href="https://forum.vuejs.org/" class="nav-link" target="_blank">Форум</a></li>
      <li><a href="https://chat.vuejs.org/" class="nav-link" target="_blank">Чат</a></li>
      <li><a href="https://www.vuemeetups.org/" class="nav-link" target="_blank">Митапы</a></li>
    </ul></li>
    <li><h4>Инструментарий</h4></li>
    <li>
      <ul>
        <li><a href="https://github.com/vuejs/vue-devtools" class="nav-link" target="_blank">Инструменты разработчика</a></li>
        <li><a href="https://cli.vuejs.org/ru/" class="nav-link" target="_blank">Vue CLI</a></li>
        <li><a href="https://vue-loader.vuejs.org/ru/" class="nav-link" target="_blank">Vue Loader</a></li>
      </ul>
    </li>
    <li><h4>Официальные плагины</h4></li>
    <li><ul>
      <li><a href="https://router.vuejs.org/ru/" class="nav-link" target="_blank">Vue Router</a></li>
      <li><a href="https://vuex.vuejs.org/ru/" class="nav-link" target="_blank">Vuex</a></li>
      <li><a href="https://ssr.vuejs.org/ru/" class="nav-link" target="_blank">Vue Server Renderer</a></li>
    </ul></li>
    <li><h4>Новости</h4></li>
    <li><ul>
      <li><a href="https://news.vuejs.org" class="nav-link" target="_blank">Еженедельные новости</a></li>
      <li><a href="https://github.com/vuejs/roadmap" class="nav-link" target="_blank">Roadmap</a></li>
      <li><a href="https://twitter.com/vuejs" class="nav-link" target="_blank">Twitter</a></li>
      <li><a href="https://medium.com/the-vue-point" class="nav-link" target="_blank">Блог</a></li>
      <li><a href="https://vuejsjob.com/?ref=vuejs" class="nav-link" target="_blank">Вакансии</a></li>
    </ul></li>
    <li><h4>Списки ресурсов</h4></li>
    <li><ul>
      <li><a href="https://github.com/vuejs" class="nav-link" target="_blank">Официальные репозитории</a></li>
      <li><a href="https://curated.vuejs.org/" class="nav-link" target="_blank">Vue Curated</a></li>
      <li><a href="https://github.com/vuejs/awesome-vue" class="nav-link" target="_blank">Awesome Vue</a></li>
    </ul></li>
  </ul>
</li>

<li>
  <a href="/v2/guide/team.html" class="nav-link team">Команда</a>
</li>
<li class="nav-dropdown-container support-vue">
  <a href="/support-vuejs/" class="nav-link">Поддержать Vue</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><ul>
      <li><a href="/support-vuejs/#One-time-Donations" class="nav-link">Единоразовые пожертвования</a></li>
      <li><a href="/support-vuejs/#Recurring-Pledges" class="nav-link">Повторяющиеся взносы</a></li>
      <li><a href="https://vue.threadless.com" target="_blank" class="nav-link">Магазин футболок</a></li>
    </ul></li>
  </ul>
</li>

<li class="nav-dropdown-container language">
  <a class="nav-link">Переводы</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://vuejs.org/v2/cookbook/packaging-sfc-for-npm.html" class="nav-link" target="_blank">English</a></li>
    <li><a href="https://cn.vuejs.org/v2/cookbook/packaging-sfc-for-npm.html" class="nav-link" target="_blank">中文</a></li>
    <li><a href="https://jp.vuejs.org/v2/cookbook/packaging-sfc-for-npm.html" class="nav-link" target="_blank">日本語</a></li>
    <li><a href="https://kr.vuejs.org/v2/cookbook/packaging-sfc-for-npm.html" class="nav-link" target="_blank">한국어</a></li>
    <li><a href="https://br.vuejs.org/v2/cookbook/packaging-sfc-for-npm.html" class="nav-link" target="_blank">Português</a></li>
    <li><a href="https://fr.vuejs.org/v2/cookbook/packaging-sfc-for-npm.html" class="nav-link" target="_blank">Français</a></li>
    <li><a href="https://vi.vuejs.org/v2/cookbook/packaging-sfc-for-npm.html" class="nav-link" target="_blank">Tiếng Việt</a></li>
  </ul>
</li>


  </ul>
</div>

        
            <div id="main" class="fix-sidebar">
                
                    
    <div class="sidebar">
  <div class="sidebar-inner">
    <ul class="main-menu">
      <li>
  <form id="search-form">
    <input type="text" id="search-query-sidebar" class="search-query st-default-search-input">
  </form>
</li>
<li class="nav-dropdown-container learn">
  <a class="nav-link current">Обучение</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><ul>
      <li><a href="/v2/guide/" class="nav-link">Руководство</a></li>
      <li><a href="/v2/api/" class="nav-link">API</a></li>
      <li><a href="/v2/style-guide/" class="nav-link">Рекомендации</a></li>
      <li><a href="/v2/examples/" class="nav-link">Примеры</a></li>
      <li><a href="/v2/cookbook/" class="nav-link current">Cookbook</a></li>
    </ul></li>
  </ul>
</li>

<li class="nav-dropdown-container ecosystem">
  <a class="nav-link">Экосистема</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><h4>Помощь</h4></li>
    <li><ul>
      <li><a href="https://forum.vuejs.org/" class="nav-link" target="_blank">Форум</a></li>
      <li><a href="https://chat.vuejs.org/" class="nav-link" target="_blank">Чат</a></li>
      <li><a href="https://www.vuemeetups.org/" class="nav-link" target="_blank">Митапы</a></li>
    </ul></li>
    <li><h4>Инструментарий</h4></li>
    <li>
      <ul>
        <li><a href="https://github.com/vuejs/vue-devtools" class="nav-link" target="_blank">Инструменты разработчика</a></li>
        <li><a href="https://cli.vuejs.org/ru/" class="nav-link" target="_blank">Vue CLI</a></li>
        <li><a href="https://vue-loader.vuejs.org/ru/" class="nav-link" target="_blank">Vue Loader</a></li>
      </ul>
    </li>
    <li><h4>Официальные плагины</h4></li>
    <li><ul>
      <li><a href="https://router.vuejs.org/ru/" class="nav-link" target="_blank">Vue Router</a></li>
      <li><a href="https://vuex.vuejs.org/ru/" class="nav-link" target="_blank">Vuex</a></li>
      <li><a href="https://ssr.vuejs.org/ru/" class="nav-link" target="_blank">Vue Server Renderer</a></li>
    </ul></li>
    <li><h4>Новости</h4></li>
    <li><ul>
      <li><a href="https://news.vuejs.org" class="nav-link" target="_blank">Еженедельные новости</a></li>
      <li><a href="https://github.com/vuejs/roadmap" class="nav-link" target="_blank">Roadmap</a></li>
      <li><a href="https://twitter.com/vuejs" class="nav-link" target="_blank">Twitter</a></li>
      <li><a href="https://medium.com/the-vue-point" class="nav-link" target="_blank">Блог</a></li>
      <li><a href="https://vuejsjob.com/?ref=vuejs" class="nav-link" target="_blank">Вакансии</a></li>
    </ul></li>
    <li><h4>Списки ресурсов</h4></li>
    <li><ul>
      <li><a href="https://github.com/vuejs" class="nav-link" target="_blank">Официальные репозитории</a></li>
      <li><a href="https://curated.vuejs.org/" class="nav-link" target="_blank">Vue Curated</a></li>
      <li><a href="https://github.com/vuejs/awesome-vue" class="nav-link" target="_blank">Awesome Vue</a></li>
    </ul></li>
  </ul>
</li>

<li>
  <a href="/v2/guide/team.html" class="nav-link team">Команда</a>
</li>
<li class="nav-dropdown-container support-vue">
  <a href="/support-vuejs/" class="nav-link">Поддержать Vue</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><ul>
      <li><a href="/support-vuejs/#One-time-Donations" class="nav-link">Единоразовые пожертвования</a></li>
      <li><a href="/support-vuejs/#Recurring-Pledges" class="nav-link">Повторяющиеся взносы</a></li>
      <li><a href="https://vue.threadless.com" target="_blank" class="nav-link">Магазин футболок</a></li>
    </ul></li>
  </ul>
</li>

<li class="nav-dropdown-container language">
  <a class="nav-link">Переводы</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://vuejs.org/v2/cookbook/packaging-sfc-for-npm.html" class="nav-link" target="_blank">English</a></li>
    <li><a href="https://cn.vuejs.org/v2/cookbook/packaging-sfc-for-npm.html" class="nav-link" target="_blank">中文</a></li>
    <li><a href="https://jp.vuejs.org/v2/cookbook/packaging-sfc-for-npm.html" class="nav-link" target="_blank">日本語</a></li>
    <li><a href="https://kr.vuejs.org/v2/cookbook/packaging-sfc-for-npm.html" class="nav-link" target="_blank">한국어</a></li>
    <li><a href="https://br.vuejs.org/v2/cookbook/packaging-sfc-for-npm.html" class="nav-link" target="_blank">Português</a></li>
    <li><a href="https://fr.vuejs.org/v2/cookbook/packaging-sfc-for-npm.html" class="nav-link" target="_blank">Français</a></li>
    <li><a href="https://vi.vuejs.org/v2/cookbook/packaging-sfc-for-npm.html" class="nav-link" target="_blank">Tiếng Việt</a></li>
  </ul>
</li>


    </ul>
    <div class="list">
      <div id="sidebar-sponsors-special">
  <div class="main-sponsor">
    <span>Специальный спонсор</span>
    <div>
    <a href="https://stdlib.com/" target="_blank" class="logo">
      <img src="/images/stdlib.png" alt="">
    </a>
    </div>
  </div>
</div>

<div id="sidebar-sponsors-platinum-left">
  <div class="main-sponsor">
    <span>Платиновые спонсоры</span>
    <div>
    <a href="https://www.bitsrc.io/?utm_source=vue&utm_medium=vue&utm_campaign=vue&utm_term=vue&utm_content=vue" target="_blank" class="logo">
      <img src="/images/bit.png" alt="Bit">
    </a>
    <a href="http://tooltwist.com/" target="_blank" class="logo">
      <img src="/images/tooltwist.png" alt="Tooltwist">
    </a>
    <a href="https://vueschool.io/?utm_source=Vuejs.org&utm_medium=Banner&utm_campaign=Sponsored%20Banner&utm_content=V1" target="_blank" class="logo">
      <img src="/images/vueschool.png" alt="VueSchool">
    </a>
    <a href="https://vehikl.com/" target="_blank" class="logo">
      <img src="/images/vehikl.png" alt="Vehikl">
    </a>
    <a href="https://www.nativescript.org/vue?utm_source=vue-js-org&utm_medium=website&utm_campaign=nativescript-awareness" target="_blank" class="logo">
      <img src="/images/nativescript.png" alt="NativeScript">
    </a>
    </div>
  </div>
  <a class="become-backer" href="/support-vuejs">
    Стать спонсором
  </a>
</div>


      
        <h2>
          
          Cookbook<sup class="beta">beta</sup>
          
        </h2>
        <ul class="menu-root">
    
        
        
        <li>
            <a href="/v2/cookbook/index.html" class="sidebar-link">Введение</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/adding-instance-properties.html" class="sidebar-link">Добавление свойств экземпляра</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/form-validation.html" class="sidebar-link">Валидация форм</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/editable-svg-icons.html" class="sidebar-link">Редактируемая система SVG-иконок</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/serverless-blog.html" class="sidebar-link">Создание блога, управляемого CMS</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/unit-testing-vue-components.html" class="sidebar-link">Модульное тестирование Vue-компонентов</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/creating-custom-scroll-directives.html" class="sidebar-link">Создание пользовательской директивы прокрутки</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/debugging-in-vscode.html" class="sidebar-link">Отладка в VS Code</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/using-axios-to-consume-apis.html" class="sidebar-link">Используем Axios для доступа к API</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/avoiding-memory-leaks.html" class="sidebar-link">Устранение утечек памяти</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/client-side-storage.html" class="sidebar-link">Хранение данных на стороне клиента</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/packaging-sfc-for-npm.html" class="sidebar-link current">Публикация Vue-компонентов в npm</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/dockerize-vuejs-app.html" class="sidebar-link">Интегрируем Docker в приложение Vue.js</a>
        </li>
    
        
        
        <li>
            <a href="/v2/cookbook/practical-use-of-scoped-slots.html" class="sidebar-link">Practical use of scoped slots with GoogleMaps</a>
        </li>
    
</ul>

      
    </div>
  </div>
</div>

<div id="sidebar-sponsors-platinum-right">
  <div class="main-sponsor">
    <span>Платиновые спонсоры</span>
    <div>
    <a href="https://www.bitsrc.io/?utm_source=vue&utm_medium=vue&utm_campaign=vue&utm_term=vue&utm_content=vue" target="_blank" class="logo">
      <img src="/images/bit.png" alt="Bit">
    </a>
    <a href="http://tooltwist.com/" target="_blank" class="logo">
      <img src="/images/tooltwist.png" alt="Tooltwist">
    </a>
    <a href="https://vueschool.io/?utm_source=Vuejs.org&utm_medium=Banner&utm_campaign=Sponsored%20Banner&utm_content=V1" target="_blank" class="logo">
      <img src="/images/vueschool.png" alt="VueSchool">
    </a>
    <a href="https://vehikl.com/" target="_blank" class="logo">
      <img src="/images/vehikl.png" alt="Vehikl">
    </a>
    <a href="https://www.nativescript.org/vue?utm_source=vue-js-org&utm_medium=website&utm_campaign=nativescript-awareness" target="_blank" class="logo">
      <img src="/images/nativescript.png" alt="NativeScript">
    </a>
    </div>
  </div>
  <a class="become-backer" href="/support-vuejs">
    Стать спонсором
  </a>
</div>



<div class="content cookbook with-sidebar ">
    
      
        <div id="ad">
  <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CKYIK2QU&placement=vuejsorg" id="_carbonads_js">
  </script>
</div>

      
    
    
      <h1>Публикация Vue-компонентов в npm</h1>
    
    
      <h2 id="Простой-пример"><a href="#Простой-пример" class="headerlink" title="Простой пример"></a>Простой пример</h2><p>Vue-компоненты по своей сути предназначены для повторного использования. Это легко, когда компонент используется только в одном приложении. Но как мы можем написать компонент один раз и использовать его на нескольких сайтах или приложениях? Пожалуй, самое простое решение — использовать npm.</p>
<p>Подготовив свой компонент для распространения через npm мы сможем его импортировать в процессе сборки для использования в полноценных веб-приложениях:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> MyComponent <span class="keyword">from</span> <span class="string">'my-component'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    MyComponent</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// остальной код компонента</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Или даже подключить компонент, используя тег <code>&lt;script&gt;</code> непосредственно в браузере:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/vue"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/my-component"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">my-component</span>&gt;</span><span class="tag">&lt;/<span class="name">my-component</span>&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>Данный подход поможет не только избежать копирования компонентов, но также помочь сообществу Vue.</p>
<h2 id="Разве-я-не-могу-просто-поделиться-файлами-vue-напрямую"><a href="#Разве-я-не-могу-просто-поделиться-файлами-vue-напрямую" class="headerlink" title="Разве я не могу просто поделиться файлами .vue напрямую?"></a>Разве я не могу просто поделиться файлами <code>.vue</code> напрямую?</h2><p>Компоненты Vue уже могут быть представлены как один файл. Так как однофайловые компоненты уже являются одним файлом, вы можете спросить:</p>
<blockquote>
<p>“Почему люди не могут использовать мои <code>.vue</code> файлы напрямую? Не это ли самый простой способ делиться Vue-компонентами?”</p>
</blockquote>
<p>Это правда, вы можете делиться непосредственно файлами <code>.vue</code>, и все, кто используют <a href="https://ru.vuejs.org/v2/guide/installation.html#Объяснение-различных-сборок" target="_blank" rel="noopener">сборку Vue</a>, включающую в себя компилятор, смогут сразу их применять. К тому же, в SSR сборке используется конкатенация строк для оптимизации, в таком случае <code>.vue</code> файл может быть предпочтительнее (<a href="#Использование-с-SSR">Подготовка Vue-компонентов для npm &gt; Использование SSR</a> для более подробного объяснения). Тем не менее, вышеописанный метод исключает использование компонентов непосредственно в браузере с помощью тега <code>&lt;script&gt;</code>, а также для всех, кто использует runtime сборку, или другой тип сборки, который не понимает как обрабатывать <code>.vue</code> файлы.</p>
<p>Правильная подготовка ваших однофайловых компонентов для распространения их через npm позволит использовать их где угодно.</p>
<h2 id="Подготовка-компонентов-для-публикации-в-npm"><a href="#Подготовка-компонентов-для-публикации-в-npm" class="headerlink" title="Подготовка компонентов для публикации в npm"></a>Подготовка компонентов для публикации в npm</h2><p>Представим следующую файловую структуру:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package.json</span><br><span class="line">build/</span><br><span class="line">   rollup.config.js</span><br><span class="line">src/</span><br><span class="line">   wrapper.js</span><br><span class="line">   my-component.vue</span><br><span class="line">dist/</span><br></pre></td></tr></table></figure>
<p class="tip">В этом документе приводятся ссылки на файл package.json, указанный выше. Файл, используемый в этих примерах, был создан вручную и будет включать минимально необходимую конфигурацию для обсуждения/выполнения задачи. Вероятно, ваш собственный package.json файл будет содержать больше кода, чем представлено здесь.</p>

<h3 id="Как-npm-узнает-какую-версию-использовать-в-браузере-а-какую-в-сборке"><a href="#Как-npm-узнает-какую-версию-использовать-в-браузере-а-какую-в-сборке" class="headerlink" title="Как npm узнает, какую версию использовать в браузере, а какую в сборке."></a>Как npm узнает, какую версию использовать в браузере, а какую в сборке.</h3><p>Файл package.json, используемый для npm, нуждается только в одной версии (<code>main</code>), но как оказалось, мы этим не ограничены. Мы можем рассмотреть наиболее распространённые варианты использования, указав 2 дополнительные версии (<code>module</code> и <code>unpkg</code>), и предоставить доступ к самому файлу <code>.vue</code>, используя свойство <code>browser</code>. Пример package.json представлен ниже:</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"my-component"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"1.2.3"</span>,</span><br><span class="line">  <span class="attr">"main"</span>: <span class="string">"dist/my-component.umd.js"</span>,</span><br><span class="line">  <span class="attr">"module"</span>: <span class="string">"dist/my-component.esm.js"</span>,</span><br><span class="line">  <span class="attr">"unpkg"</span>: <span class="string">"dist/my-component.min.js"</span>,</span><br><span class="line">  <span class="attr">"browser"</span>: &#123;</span><br><span class="line">    <span class="attr">"./sfc"</span>: <span class="string">"src/my-component.vue"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Когда используется Webpack 2+, Rollup или другие современные системы сборки, будет выбран файл из сборки <code>module</code>. Более старые приложения будут использовать файл из <code>main</code>, а файл из <code>unpkg</code> может быть использован непосредственно в браузере. На самом деле, cdn <a href="https://unpkg.com" target="_blank" rel="noopener">unpkg</a> автоматически используется, когда кто-то вбивает URL вашего модуля в свой сервис.</p>
<h3 id="Использование-с-SSR"><a href="#Использование-с-SSR" class="headerlink" title="Использование с SSR"></a>Использование с SSR</h3><p>Вы могли заметить, что браузеры не будут использовать версию <code>browser</code> вашего модуля. Причина в том, что на самом деле это свойство предназначено для того, чтобы авторы могли предоставить <a href="https://github.com/defunctzombie/package-browser-field-spec#spec" target="_blank" rel="noopener">подсказки для сборщиков</a>, которые, в свою очередь, создадут свои собственные версии модуля для использования на клиенте. Проявив немного креативности, мы можем сопоставить псевдоним с самим файлом <code>.vue</code>. Например:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> MyComponent <span class="keyword">from</span> <span class="string">'my-component/sfc'</span>; <span class="comment">// Обратите внимание на '/sfc'</span></span><br></pre></td></tr></table></figure>
<p>Системы сборки видят объявление <code>browser</code> в package.json и преобразовывают запрос к <code>my-component/sfc</code> в <code>my-component/src/my-component.vue</code>, в результате используется исходный файл <code>.vue</code>. Теперь процесс SSR сможет использовать оптимизацию конкатенации строк, необходимую для повышения производительности.</p>
<p class="tip">Примечание: При непосредственном использовании компонентов <code>.vue</code> обратите внимание на любую предварительную обработку, требуемую тегам <code>script</code> и <code>style</code>. Эти зависимости будут переданы пользователям. Попробуйте сделать <code>простые</code> однофайловые компоненты максимально тривиальными.</p>

<h3 id="Как-мне-сделать-несколько-версий-моего-компонента"><a href="#Как-мне-сделать-несколько-версий-моего-компонента" class="headerlink" title="Как мне сделать несколько версий моего компонента?"></a>Как мне сделать несколько версий моего компонента?</h3><p>Нет необходимости писать код модуля несколько раз. Можно подготовить все 3 версии вашего компонента за 1 шаг и в считанные секунды. Для примера, ниже используется <a href="https://rollupjs.org" target="_blank" rel="noopener">Rollup</a> из-за своей минимальной конфигурации, но подобное можно сделать и с другими системами сборки - более подробно можно прочитать <a href="https://medium.com/webpack/webpack-and-rollup-the-same-but-different-a41ad427058c" target="_blank" rel="noopener">здесь</a>. Раздел <code>scripts</code> в файле package.json можно обновить, добавив отдельную команду для каждой версии сборки и общую команду <code>build</code>, которая запустит их вместе. После этого, наш package.json будет выглядеть следующим образом:</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"my-component"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"1.2.3"</span>,</span><br><span class="line">  <span class="attr">"main"</span>: <span class="string">"dist/my-component.umd.js"</span>,</span><br><span class="line">  <span class="attr">"module"</span>: <span class="string">"dist/my-component.esm.js"</span>,</span><br><span class="line">  <span class="attr">"unpkg"</span>: <span class="string">"dist/my-component.min.js"</span>,</span><br><span class="line">  <span class="attr">"browser"</span>: &#123;</span><br><span class="line">    <span class="attr">"./sfc"</span>: <span class="string">"src/my-component.vue"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"build"</span>: <span class="string">"npm run build:umd &amp; npm run build:es &amp; npm run build:unpkg"</span>,</span><br><span class="line">    <span class="attr">"build:umd"</span>: <span class="string">"rollup --config build/rollup.config.js --format umd --file dist/my-component.umd.js"</span>,</span><br><span class="line">    <span class="attr">"build:es"</span>: <span class="string">"rollup --config build/rollup.config.js --format es --file dist/my-component.esm.js"</span>,</span><br><span class="line">    <span class="attr">"build:unpkg"</span>: <span class="string">"rollup --config build/rollup.config.js --format iife --file dist/my-component.min.js"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"rollup"</span>: <span class="string">"^0.57.1"</span>,</span><br><span class="line">    <span class="attr">"rollup-plugin-buble"</span>: <span class="string">"^0.19.2"</span>,</span><br><span class="line">    <span class="attr">"rollup-plugin-vue"</span>: <span class="string">"^3.0.0"</span>,</span><br><span class="line">    <span class="attr">"vue"</span>: <span class="string">"^2.5.16"</span>,</span><br><span class="line">    <span class="attr">"vue-template-compiler"</span>: <span class="string">"^2.5.16"</span>,</span><br><span class="line">    ...</span><br><span class="line">  &#125;,</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p class="tip">Не забудьте, если у вас уже есть файл package.json, вероятнее всего он будет содержать больше кода. Пример выше только демонстрирует, как можно начинать. Также, <i>пакеты</i>, перечисленные в devDependencies (не их версии), единственное требование для rollup, чтобы создать три отдельных вида сборки (umd, es, и unpkg). С появлением новых версий, модули следует обновить по мере необходимости.</p>

<p>Мы закончили с изменениями в package.json. Далее, нам понадобится небольшая обёртка для экспорта или автоматической установки актуального однофайлового компонента. Плюс - минимальная конфигурация системы сборки Rollup - и настройка завершена!</p>
<h3 id="Как-выглядит-мой-подготовленный-для-npm-компонент"><a href="#Как-выглядит-мой-подготовленный-для-npm-компонент" class="headerlink" title="Как выглядит мой подготовленный для npm компонент?"></a>Как выглядит мой подготовленный для npm компонент?</h3><p>В зависимости от того, как используется ваш компонент, он должен быть JavaScript-модулем, совместимым с <a href="https://medium.freecodecamp.org/javascript-modules-a-beginner-s-guide-783f7d7a5fcc#c33a" target="_blank" rel="noopener">CommonJS/UMD</a>, <a href="https://medium.freecodecamp.org/javascript-modules-a-beginner-s-guide-783f7d7a5fcc#4f5e" target="_blank" rel="noopener">ES6 javascript</a> модулем, или, в случае использования тега <code>&lt;script&gt;</code>, он будет автоматически загружаться во Vue с помощью <code>Vue.use(...)</code>, поэтому он будет сразу доступен на странице. Это достигается простым файлом wrapper.js, который обрабатывает экспорт и автоматическую установку модуля. В целом, обёртка выглядит следующим образом:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Импорт vue компонента</span></span><br><span class="line"><span class="keyword">import</span> component <span class="keyword">from</span> <span class="string">'./my-component.vue'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Объявление функции установки, выполняемой Vue.use()</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">install</span>(<span class="params">Vue</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (install.installed) <span class="keyword">return</span>;</span><br><span class="line">  install.installed = <span class="literal">true</span>;</span><br><span class="line">  Vue.component(<span class="string">'MyComponent'</span>, component);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Создание значения модуля для Vue.use()</span></span><br><span class="line"><span class="keyword">const</span> plugin = &#123;</span><br><span class="line">  install</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Автоматическая установка, когда vue найден (например в браузере с помощью тега &lt;script&gt;)</span></span><br><span class="line"><span class="keyword">let</span> GlobalVue = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">window</span> !== <span class="string">'undefined'</span>) &#123;</span><br><span class="line">  GlobalVue = <span class="built_in">window</span>.Vue;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> global !== <span class="string">'undefined'</span>) &#123;</span><br><span class="line">  GlobalVue = global.Vue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (GlobalVue) &#123;</span><br><span class="line">  GlobalVue.use(plugin);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Экспорт компонента, для использования в качестве модуля (npm/webpack/etc.)</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> component;</span><br></pre></td></tr></table></figure>
<p>Обратите внимание, что в первой строке импортируется непосредственно ваш однофайловый компонент, а последняя строка экспортирует его без изменений. Как указано в комментариях в остальной части кода, обёртка предоставляет функцию <code>install</code> для Vue, затем пытается обнаружить Vue и автоматически установить компонент. Выполнив 90% работы, настало время ускориться к финишу!</p>
<h3 id="Как-настроить-сборку-с-Rollup"><a href="#Как-настроить-сборку-с-Rollup" class="headerlink" title="Как настроить сборку с Rollup?"></a>Как настроить сборку с Rollup?</h3><p>С готовой секцией <code>scripts</code> и обёрткой для однофайловых компонентов, всё что нам осталось - убедиться, что Rollup правильно настроен. К счастью, это можно сделать с помощью маленького файла rollup.config.js, состоящего из 16 строк кода:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">'rollup-plugin-vue'</span>; <span class="comment">// Обработка однофайловых компонентов .vue</span></span><br><span class="line"><span class="keyword">import</span> buble <span class="keyword">from</span> <span class="string">'rollup-plugin-buble'</span>; <span class="comment">// Транспиляция/Полифилизация для умеренной поддержки браузеров</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  input: <span class="string">'src/wrapper.js'</span>, <span class="comment">// Путь до относительного package.json</span></span><br><span class="line">  output: &#123;</span><br><span class="line">    name: <span class="string">'MyComponent'</span>,</span><br><span class="line">    exports: <span class="string">'named'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    vue(&#123;</span><br><span class="line">        css: <span class="literal">true</span>, <span class="comment">// Динамически внедряем CSS в тег &lt;style&gt;</span></span><br><span class="line">        compileTemplate: <span class="literal">true</span>, <span class="comment">// Явное преобразование шаблона в рендер-функцию</span></span><br><span class="line">    &#125;),</span><br><span class="line">    buble() <span class="comment">// Транспиляция в ES5</span></span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Этот пример конфигурации содержит минимальные настройки чтобы подготовить ваш однофайловый компонент для npm. Есть множество способов изменения, например экспорт CSS в отдельный файл, использование CSS-препроцессоров, минификации JS и т.д.</p>
<p>Кроме того, стоит обратить внимание на <code>name</code>, данное компоненту. Компоненту будет присвоено имя в формате PascalCase, и оно должно соответствовать имени компонента в формате kebab-case, которое используется в данной статье.</p>
<h3 id="Это-заменит-мой-текущий-процесс-разработки"><a href="#Это-заменит-мой-текущий-процесс-разработки" class="headerlink" title="Это заменит мой текущий процесс разработки?"></a>Это заменит мой текущий процесс разработки?</h3><p>Представленная конфигурация не предназначена для замены процесса разработки, который вы используете в настоящее время. Если у вас настроен webpack с горячей перезагрузкой модулей (HMR), продолжайте его использовать! Если вы начинаете с нуля - не стесняйтесь установить <a href="https://github.com/vuejs/vue-cli/" target="_blank" rel="noopener">Vue CLI 3</a>, который предоставит вам готовую конфигурацию с HMR:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vue serve --open src/my-component.vue</span><br></pre></td></tr></table></figure>
<p>Другими словами, разрабатывайте любым удобным для вас способом. Все, что описано в этой статье, скорее представляет из себя «финальные штрихи», нежели на полный процесс разработки.</p>
<h2 id="Когда-избегать-этого-способа"><a href="#Когда-избегать-этого-способа" class="headerlink" title="Когда избегать этого способа"></a>Когда избегать этого способа</h2><p>Использование данного метода может быть плохой идеей в определённых случаях. В данной статье мы не вдавались в подробности того, как были написаны сами компоненты. Некоторые компоненты могут порождать побочные эффекты, например использовать директивы или расширять сторонние библиотеки дополнительным функционалом. В этих случаях вам нужно будет оценить, слишком ли велики изменения, необходимые для использования этого способа.</p>
<p>Кроме того, обратите внимание на любые зависимости, которые может иметь ваш компонент. Например, если вы подключаете стороннюю библиотеку для сортировки или для работы с API, Rollup может включить их в итоговый код сборки, если будет неправильно настроен. Чтобы иметь возможность использовать данный способ, вам нужно будет настроить Rollup таким образом, чтобы он исключал эти файлы из финального результата. Затем вам нужно будет обновить документацию, чтобы сообщить своим пользователям о зависимостях.</p>
<h2 id="Альтернативные-варианты"><a href="#Альтернативные-варианты" class="headerlink" title="Альтернативные варианты"></a>Альтернативные варианты</h2><p>В то время, когда эта статья была написана, Vue CLI 3 был в бета-версии. Эта версия CLI содержит в себе встроенный режим сборки <code>library</code>, который создаёт версии CommonJS и UMD компонента. Этого должно быть достаточно, тем не менее вам нужно будет убедиться, что в вашем файле package.json  правильно указаны значения <code>main</code> и <code>unpkg</code>. К тому же, отсутствует поддержка ES6 <code>module</code>, если только она не будет добавлена до релиза CLI или через плагин.</p>
<h2 id="Благодарности"><a href="#Благодарности" class="headerlink" title="Благодарности"></a>Благодарности</h2><p>Этот рецепт является результатом выступления <a href="https://twitter.com/mgdodgeycode" target="_blank" rel="noopener">Mike Dodge</a> на VueConf.us в марте 2018. Он опубликовал программу в npm, которая быстро сгенерирует образец однофайлового компонента. Вы можете скачать программу <a href="https://www.npmjs.com/package/vue-sfc-rollup" target="_blank" rel="noopener">vue-sfc-rollup</a> из npm. Также, вы можете <a href="https://github.com/team-innovation/vue-sfc-rollup" target="_blank" rel="noopener">склонировать код</a> и отредактировать его.</p>

    
    
    <div class="footer">
        <script src="//m.servedby-buysellads.com/monetization.js" type="text/javascript"></script>
<div class="bsa-cpc"></div>
<script>
  (function(){
    if(typeof _bsa !== 'undefined' && _bsa) {
    _bsa.init('default', 'CKYD62QM', 'placement:vuejsorg', {
      target: '.bsa-cpc',
      align: 'horizontal',
      disable_css: 'true'
    });
      }
  })();
</script>

      Обнаружили ошибку или хотите добавить что-то своё в документацию?
      <a href="https://github.com/translation-gang/ru.vuejs.org/blob/master/src/v2/cookbook/packaging-sfc-for-npm.md" target="_blank">
        Отредактируйте эту страницу на GitHub!
      </a>
    </div>
</div>

                
            </div>
            <script src="/js/smooth-scroll.min.js"></script>
        

        <!-- main custom script for sidebars, version selects etc. -->
        <script src="/js/css.escape.js"></script>
        <script src="/js/common.js"></script>

        <!-- search -->
        <link href="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="/css/search.css">
        <script src="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
        <script>
        [
          '#search-query-nav',
          '#search-query-sidebar',
          '#search-query-menu'
        ].forEach(function (selector) {
          if (!document.querySelector(selector)) return
          // search index defaults to v2
          var match = window.location.pathname.match(/^\/(v\d+)/)
          var version = match ? match[1] : 'v2'
          docsearch({
            appId: 'BH4D9OD16A',
            apiKey: 'c6f9366f6f7fe057ee3e01747b603d9f',
            indexName: 'vuejs_ru',
            inputSelector: selector,
            algoliaOptions: { facetFilters: ["version:" + version] }
          })
        })
        </script>

        <!-- fastclick -->
        <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
        <script>
        document.addEventListener('DOMContentLoaded', function() {
          FastClick.attach(document.body)
        }, false)
        </script>
    </body>
</html>
